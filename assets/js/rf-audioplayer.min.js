(function(){function e(){o?(q.classList.replace("rf-footer-player-open","rf-footer-player"),o=!1,L.classList.add("rf-disabled"),p.classList.add("rf-disabled"),w.classList.add("rf-disabled"),q.addEventListener("click",e)):(q.classList.replace("rf-footer-player","rf-footer-player-open"),o=!0,L.classList.remove("rf-disabled"),p.classList.remove("rf-disabled"),d||w.classList.remove("rf-disabled"),q.removeEventListener("click",e))}function t(){i?(g.pause(),y.src=u,cancelAnimationFrame(l),i=!1):(g.play(),y.src=f,requestAnimationFrame(r),i=!0)}function r(){w.classList.contains("rf-grey")||n(g.currentTime/g.duration*1e3),S.textContent=s(g.currentTime),l=requestAnimationFrame(r)}function a(e){h.style.setProperty("--range-progress-width",e+"%")}function n(e){h.value=e,a(e/10)}function s(e){if(e===1/0)return"Live";const t=Math.floor(e/60),r=Math.floor(e%60);return`${t<10?"0":""}${t}:${r<10?"0":""}${r}`}let i=!1,o=!1,d=!1,l=null,c="";const m=100,u="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24'%3E%3Cpath fill='white' d='M8 5.14v14l11-7z'/%3E%3C/svg%3E",f="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24'%3E%3Cpath fill='white' d='M14 19h4V5h-4M6 19h4V5H6z'/%3E%3C/svg%3E",g=document.querySelector(".rf-play-audio"),y=document.querySelector(".rf-play-button img"),v=document.querySelector(".rf-play-img img"),p=document.querySelector(".rf-play-img a"),L=document.querySelector(".rf-play-title a"),S=document.querySelector(".rf-play-current"),b=document.querySelector(".rf-play-duration"),h=document.querySelector(".rf-play-range"),w=document.querySelector(".rf-play-range-container"),E=document.querySelector(".rf-close-player-button"),k=document.querySelector(".rf-close-footer-button"),A=document.querySelector(".rf-download-button a"),q=document.querySelector("footer");L.textContent="",A.setAttribute("download",""),L.classList.add("rf-disabled"),p.classList.add("rf-disabled"),window.rf_playItem=function(t){y.src=u;const a=t.target.getAttribute("data-src");c=t.target.getAttribute("data-title");const n=t.target.getAttribute("data-url"),s=t.target.getAttribute("data-img");return v.src=s,p.href=n,L.textContent="Lade...",L.href=n,document.querySelector("main").classList.add("rf-main-player"),q.classList.add("rf-footer-player"),o||q.addEventListener("click",e),new Promise((e,t)=>{g.src=a,g.play().then(()=>{c.length>m&&(c=c.substring(0,m)+"..."),L.textContent=c,y.src=f,"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:c,artist:"Radio F.R.E.I.",artwork:[{src:s}]})),requestAnimationFrame(r),i=!0,e()}).catch(e=>{t(e)})})},y.addEventListener("click",e=>{t(),e.stopPropagation()}),h.addEventListener("input",()=>{a(h.value/10),S.textContent=s(h.value*g.duration/1e3),g.paused||cancelAnimationFrame(l)}),h.addEventListener("change",()=>{g.currentTime=h.value/1e3*g.duration,g.paused||requestAnimationFrame(r)}),E.addEventListener("click",t=>{e(),t.stopPropagation()}),k.addEventListener("click",()=>{g.src="",document.querySelector("main").classList.remove("rf-main-player"),q.classList.remove("rf-footer-player","rf-footer-player-open"),L.textContent="",L.classList.add("rf-disabled"),p.classList.add("rf-disabled"),i=!1,o=!1}),g.addEventListener("loadeddata",()=>{y.parentElement.classList.remove("rf-grey","rf-disabled"),S.classList.remove("rf-grey"),b.classList.remove("rf-grey"),g.duration!==1/0?(d=!1,w.classList.remove("rf-grey"),o&&w.classList.remove("rf-disabled"),A.href=g.src,A.parentElement.classList.remove("rf-grey","rf-disabled")):d=!0,b.textContent=s(g.duration)}),g.addEventListener("ended",()=>{i=!1,y.src=u,cancelAnimationFrame(l),S.textContent="00:00",n(0)}),g.addEventListener("emptied",()=>{y.parentElement.classList.add("rf-grey","rf-disabled"),S.classList.add("rf-grey"),b.classList.add("rf-grey"),w.classList.add("rf-grey","rf-disabled"),S.textContent="00:00",b.textContent="00:00",n(0),cancelAnimationFrame(l),A.href="#",A.parentElement.classList.add("rf-grey","rf-disabled")}),g.addEventListener("seeking",()=>{L.textContent="Suche..."}),g.addEventListener("seeked",()=>{L.textContent=c}),"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",t),navigator.mediaSession.setActionHandler("pause",t),navigator.mediaSession.setActionHandler("seekbackward",e=>{g.currentTime=g.currentTime-(e.seekOffset||10)}),navigator.mediaSession.setActionHandler("seekforward",e=>{g.currentTime=g.currentTime+(e.seekOffset||10)}),navigator.mediaSession.setActionHandler("seekto",e=>{e.fastSeek&&"fastSeek"in g?g.fastSeek(e.seekTime):g.currentTime=e.seekTime}),navigator.mediaSession.setActionHandler("stop",()=>{g.currentTime=0,n(0),S.textContent="00:00",i&&(y.src=u,cancelAnimationFrame(l),i=!1)}))})();